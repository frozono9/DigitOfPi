<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digits of Pi Search Tool</title>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 0;
            text-align: center;
            background-color: #f0f0f0;
        }

        #container {
            padding: 20px;
        }

        #sequence {
            font-size: 24px;
            color: gray;
            white-space: nowrap;
            overflow-x: auto;
            width: 100vw;
            margin: 20px auto;
            text-align: center;
        }

        #search-section {
            margin-top: 50px;
        }

        input[type="text"] {
            font-size: 24px;
            padding: 10px;
            width: 250px;
            margin: 10px;
            text-align: center;
        }

        button {
            padding: 10px 20px;
            font-size: 20px;
            cursor: pointer;
        }

        .bold-red {
            font-weight: bold;
            color: red;
        }

        .highlighted-result {
            font-size: 32px;
            font-weight: bold;
            color: #2d72d9;
            display: block;
            margin-top: 10px;
        }

        .highlighted-position {
            font-size: 32px;
            font-weight: bold;
            color: #e74c3c;
            display: block;
            margin-top: 10px;
        }

        .highlighted-text {
            font-size: 28px;
            margin-top: 10px;
        }

        #fake-sequence-list {
            margin-top: 20px;
            color: gray;
        }

        #fake-sequence-list ul {
            display: flex;
            justify-content: center;
            padding: 0;
            list-style-type: none;
        }

        #fake-sequence-list li {
            margin: 0 5px;
            padding: 5px;
            background-color: #f0f0f0;
            border-radius: 5px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 28px;
            font-weight: normal;
            text-align: center;
        }

        #settings-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 28px;
            cursor: pointer;
        }

        #settings-menu {
            display: none;
            position: absolute;
            top: 50px;
            right: 10px;
            background: white;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 8px;
        }

        #settings-menu input {
            font-size: 18px;
            padding: 5px;
            width: 100px;
            text-align: center;
        }

        #settings-menu button {
            font-size: 18px;
            margin-top: 5px;
        }

        #pi-fun-facts {
            margin-top: 50px;
            padding: 20px;
            background-color: #f7f7f7;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        #pi-fun-facts h2 {
            font-size: 28px;
            color: #333;
        }

        #fun-facts-list {
            margin-top: 10px;
            list-style-type: none;
            padding: 0;
        }

        #fun-facts-list li {
            font-size: 20px;
            color: #555;
            margin-bottom: 10px;
        }
        
    </style>
</head>
<body>

    <div id="container">
        <h1>Digits of Pi Search Tool</h1>
        <p>Enter a number to see where it appears in the decimal sequence of Pi.</p>

        <div id="search-section">
            <input type="text" id="user-number" placeholder="Enter a number">
            <button onclick="findPiPosition()">Find Position</button>
        </div>

        <div id="result"></div>
        <div id="sequence"></div>
    </div>

    <!-- Settings Icon -->
    <div id="settings-icon" onclick="toggleSettings()">‚öôÔ∏è</div>

    <!-- Settings Menu -->
    <div id="settings-menu">
        <label for="force-position">Force Position:</label>
        <input type="number" id="force-position" value="45782" style="display:none;"><br>

        <label for="position-mode">Position Mode:</label>
        <select id="position-mode">
            <option value="forced">Forced Position</option>
            <option value="fibonacci">Fibonacci Position</option>
        </select><br>

        <button onclick="updateSettings()">Save</button>
    </div>

    <div id="pi-fun-facts">
        <h2>Fun Facts About Pi</h2>
        <ul id="fun-facts-list">
            <!-- Fun facts will go here -->
        </ul>
    </div>

    <script>

        const piFunFacts = [
            "Pi is an irrational number, which means it cannot be expressed as a simple fraction. ü§î",
            "Pi is approximately 3.14159, but it has been calculated to over 31 trillion digits! üî¢",
            "Pi is used in various fields including mathematics, physics, engineering, and even in computer science. üßë‚Äçüî¨",
            "The symbol for Pi (œÄ) was first used by Welsh mathematician William Jones in 1706. üìö",
            "Pi Day is celebrated on March 14th (3/14), since 3, 1, and 4 are the first three digits of Pi. üéâ",
            "Albert Einstein was born on Pi Day, March 14, 1879! üß†",
            "Pi is involved in calculating the circumference and area of a circle, which makes it one of the most important constants in mathematics. üîµ",
            "The record for memorizing Pi is held by Rajveer Meena, who recited 70,000 digits of Pi! üèÖ",
            "Pi is not just a number, but an ongoing mystery that continues to be explored by mathematicians worldwide. üîç"
        ];

        // Function to display multiple random facts
        function displayRandomFacts() {
            const factList = document.getElementById('fun-facts-list');
            factList.innerHTML = '';  // Clear any previous facts

            // Get a random number of facts (e.g., 3 facts at a time)
            const numberOfFacts = 3; 
            const randomFacts = [];

            while (randomFacts.length < numberOfFacts) {
                const randomFact = piFunFacts[Math.floor(Math.random() * piFunFacts.length)];
                // Ensure that we don't repeat the same fact
                if (!randomFacts.includes(randomFact)) {
                    randomFacts.push(randomFact);
                }
            }

            // Add each fact to the list
            randomFacts.forEach(fact => {
                const listItem = document.createElement('li');
                listItem.textContent = fact;
                factList.appendChild(listItem);
            });
        }

        // Call this function when the page loads to add the facts
        window.onload = displayRandomFacts;

        let state = 0;
        let FORCED_POSITION = 45782;
        let positionMode = 'forced';

        const REAL_PI_DIGITS = "141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481174502841027019385211055596446229489549303819644288109756659334461284756482337867831527120190914564856692346034861045432664821339360726024914127372458700666031558817488152092096282925409171536436789259036001133053054882046652138414695194151160943305727036575959195309218611738193261179310511854807446237996274956735188575272489122793818301194912";

        function findPiPosition() {
            const number = document.getElementById('user-number').value;
            let position;
            if (positionMode === 'forced') {
                position = FORCED_POSITION;
            } else if (positionMode === 'fibonacci') {
                position = generateFibonacciPosition(number);
            }


            if (number.length > 0 && !isNaN(number)) {
                const realPosition = findRealPosition(number);

                if (realPosition) {
                    document.getElementById('result').innerHTML = `Your number <span class="bold-red">${number}</span> first appears at position <span class="highlighted-position">${realPosition}</span> in the digits of Pi.`;
                    state = 0;
                } else if (realPosition === null && position == FORCED_POSITION) {
                    document.getElementById('result').innerHTML = `Your number <span class="bold-red">${number}</span> first appears at position <span class="highlighted-position">${FORCED_POSITION}</span> in the digits of Pi.`;
                    state = 200;
                } else {
                    document.getElementById('result').innerHTML = `Your number <span class="bold-red">${number}</span> first appears at position <span class="highlighted-position">${generateFibonacciPosition(number)}</span> in the digits of Pi.`;
                    state = 200;
                }

                displayPiSequence(number, realPosition);
            } else {
                alert('Please enter a valid number.');
            }
        }

        function generateFibonacciPosition(number) {
            const digits = number.split('').map(digit => parseInt(digit));

            const sums = [
                (digits[0] + digits[1]) % 10,
                (digits[0] + digits[2]) % 10,
                (digits[0] + digits[3]) % 10,
                (digits[1] + digits[2]) % 10,
                (digits[1] + digits[3]) % 10
            ];

            return sums.join('');
        }

        function toggleSettings() {
            const menu = document.getElementById('settings-menu');
            const forcePositionInput = document.getElementById('force-position');
            const positionModeSelect = document.getElementById('position-mode');

            // Toggle visibility of the settings menu
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';

            // Adjust the visibility of the force position input based on the current position mode
            if (positionModeSelect.value === 'forced') {
                forcePositionInput.style.display = 'block';
            } else {
                forcePositionInput.style.display = 'none';
            }
        }

        function updateSettings() {
            const newPosition = parseInt(document.getElementById('force-position').value);
            const newMode = document.getElementById('position-mode').value;

            if (!isNaN(newPosition) && newPosition > 0) {
                FORCED_POSITION = newPosition;
            }

            positionMode = newMode;

            // Display the updated settings
            alert(`Settings updated!\nForce Position: ${FORCED_POSITION}\nMode: ${positionMode}`);

            // Toggle the settings menu off after saving the settings
            toggleSettings();
        }

        function findRealPosition(number) {
            const position = REAL_PI_DIGITS.indexOf(number);
            return position === -1 ? null : position + 1;
        }

        function displayPiSequence(number, realPosition) {
            const sequenceElement = document.getElementById('sequence');

            const before = state === 0
                ? REAL_PI_DIGITS.slice(0, realPosition - 1)
                : Array.from({ length: 5000 }, () => Math.floor(Math.random() * 10)).join('');
            const after = state === 0
                ? REAL_PI_DIGITS.slice(realPosition + number.length - 1)
                : generateFibonacciSequence(number).join('');

            const first200Digits = REAL_PI_DIGITS.slice(0, 200);
            const fullSequence = state === 0
                ? `${before}<span class="bold-red">${number}</span>${after}`
                : `${first200Digits}${before}<span class="bold-red">${number}</span>${after}`;

            sequenceElement.innerHTML = fullSequence;

            const sequenceWidth = sequenceElement.scrollWidth;
            const windowWidth = window.innerWidth;
            const numberPosition = state === 0 ? before.length : 200 + before.length;
            const offset = numberPosition * (sequenceWidth / fullSequence.length);

            sequenceElement.scrollLeft = offset - windowWidth / 3;
        }

        function generateFibonacciSequence(number) {
            const digits = number.split('').map(digit => parseInt(digit));
            let fibSequence = [digits[0], digits[1]];

            for (let i = 2; i < 5000; i++) {
                let nextDigit = (fibSequence[i - 2] + fibSequence[i - 1]) % 10;
                fibSequence.push(nextDigit);
            }

            return fibSequence.slice(2);
        }

        // Ensure the DOM is ready
        document.getElementById('position-mode').addEventListener('change', function () {
            const forcePositionInput = document.getElementById('force-position');
            if (this.value === 'forced') {
                forcePositionInput.style.display = 'block';
            } else {
                forcePositionInput.style.display = 'none';
            }
        });
    </script>

</body>
</html>
